/* Responsive App Shell for wide / ultra-wide / extreme-wide */

/* 0) Base variables (mobile-first) */
:root {
    --sidebar-w: 0px;
    /* no sidebar offset on narrow screens */
    --content-max: 1280px;
    /* default content width cap */
    --gutter: 16px;
    /* base gutter */
    --header-h: 64px;
    /* header height */
    --card-min: 280px;
    /* min card width for auto grid */
}

/* 1) App Shell primitives */
/* Sidebar always left-aligned; on wide screens it becomes fixed */
aside {
    width: var(--sidebar-w);
    min-width: var(--sidebar-w);
}

/* Sticky header aligned to the main content */
header {
    position: sticky;
    top: 0;
    height: var(--header-h);
    z-index: 900;
    backdrop-filter: saturate(120%) blur(4px);
}

/* Main content container alignment */
.main-content {
    max-width: var(--content-max);
    margin: 0 auto;
    padding-left: var(--gutter);
    padding-right: var(--gutter);
    box-sizing: border-box;
}

/* Some widoki używają .page-container – traktuj jak main */
.page-container {
    max-width: var(--content-max);
    margin: 0 auto;
    padding-left: var(--gutter);
    padding-right: var(--gutter);
    box-sizing: border-box;
}

/* 2) Wide desktop (≥1440) – fixed sidebar, wyłącz grid shell */
@media (min-width: 1440px) {
    :root {
        --sidebar-w: 260px;
        --content-max: 1360px;
        --gutter: 20px;
    }

    /* Sidebar becomes fixed on wide screens */
    aside {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        z-index: 1000;
        border-right: 1px solid var(--border-light);
    }

    /* Stary układ grid – wyłącz i pozwól pełnej szerokości */
    .dashboard-container {
        display: block;
        width: 100vw;
    }

    /* Header and content shifted by sidebar width */
    header,
    .main-content,
    .page-container {
        margin-left: var(--sidebar-w);
    }
}

/* 3) Full stretch already from ≥1600 */
@media (min-width: 1600px) {
    :root {
        --content-max: calc(100vw - var(--sidebar-w));
        /* full stretch */
    }

    header,
    .main-content,
    .page-container {
        width: calc(100vw - var(--sidebar-w)) !important;
        max-width: none !important;
    }

    /* przy full-stretch zostawiamy marginesy wewnętrzne na niższych wrapperach */
    .main-content,
    .page-container {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    /* Twarde nadpisania dla kontenerów bootstrapowych i lokalnych wrapperów */
    .container,
    .container-lg,
    .container-xl,
    .container-xxl,
    .container-fluid,
    .content,
    .content-wrapper,
    .wrapper,
    .page,
    .page-wrap {
        max-width: none !important;
        width: calc(100vw - var(--sidebar-w)) !important;
        /* usuń podwójny offset – tylko main/header mają margin-left */
        margin-left: 0 !important;
        margin-right: 0 !important;
        padding-left: var(--gutter) !important;
        padding-right: var(--gutter) !important;
        box-sizing: border-box !important;
    }

    .dashboard-container main,
    .dashboard-container header {
        max-width: none !important;
    }
}

/* 4) Ultra-wide (≥1920) */
@media (min-width: 1920px) {
    :root {
        --sidebar-w: 280px;
        --gutter: 24px;
        --card-min: 300px;
        --content-max: calc(100vw - var(--sidebar-w));
    }
}

/* 5) Super ultra-wide (≥2560) */
@media (min-width: 2560px) {
    :root {
        --gutter: 28px;
        --card-min: 320px;
    }
}

/* 6) Extreme-wide (≥3440) */
@media (min-width: 3440px) {
    :root {
        --gutter: 32px;
        --card-min: 340px;
    }
}

/* 7) Ultra extreme (≥5120) – opcjonalnie powiększ margines */
@media (min-width: 5120px) {
    :root {
        --gutter: 36px;
        --card-min: 360px;
    }
}

/* 8) Universal auto grid for cards/lists */
.auto-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--card-min), 1fr));
    gap: var(--gutter);
}

/* 9) Container queries for intelligent card layouts */
/* Enable inline-size containment on card wrappers */
.card,
.modern-card,
.material-card,
.project-card {
    container-type: inline-size;
}

@container (min-width: 320px) {

    .card__meta,
    .card-meta {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }
}

@container (min-width: 480px) {

    .card__row-2col,
    .card-row-2col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }
}

@container (min-width: 640px) {

    .card__row-3col,
    .card-row-3col {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
    }
}

/* 10) Tables on wide screens - horizontal comfort */
.table-responsive {
    border-radius: 12px;
    overflow: hidden;
    width: 100%;
}

.table {
    width: 100% !important;
}

.table th,
.table td {
    padding: 16px 12px;
    vertical-align: middle;
}

@media (min-width: 1920px) {

    .table th,
    .table td {
        padding: 18px 14px;
    }
}

/* 11) Ensure header background blends nicely */
header.bg-card {
    backdrop-filter: saturate(120%) blur(6px);
}

html,
body {
    overflow-x: hidden;
}
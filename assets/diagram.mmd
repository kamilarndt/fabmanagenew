graph TD
    %% CLIENTS & PROJECTS LAYER
    Client[ğŸ‘¤ CLIENT] --> Project[ğŸ“‹ PROJECT]
    Project --> Pricing[ğŸ’° PRICING]
    Project --> Concept[ğŸ’¡ CONCEPT] 
    Project --> TechnicalDesign[ğŸ“ TECHNICAL DESIGN]
    
    %% TILES LAYER (Core Business Logic)
    TechnicalDesign --> Tiles[ğŸ§© TILES]
    Tiles --> TileDesign[ğŸ¨ TILE DESIGN]
    Tiles --> TileApproval[âœ… TILE APPROVAL]
    
    %% MATERIALS LAYER
    Tiles --> BOM[ğŸ“Š BOM - Bill of Materials]
    BOM --> MaterialReservation[ğŸ”’ MATERIAL RESERVATION]
    BOM --> Inventory[ğŸ“¦ INVENTORY]
    Inventory --> MaterialOrdering[ğŸ›’ MATERIAL ORDERING]
    MaterialOrdering --> Suppliers[ğŸ­ SUPPLIERS]
    
    %% CNC & PRODUCTION LAYER  
    TileApproval --> DXFUpload[ğŸ“ DXF UPLOAD]
    DXFUpload --> CNCEstimation[â±ï¸ CNC ESTIMATION]
    CNCEstimation --> CNCQueue[ğŸ”„ CNC QUEUE]
    CNCQueue --> CNCProduction[âš™ï¸ CNC PRODUCTION]
    
    %% PRIORITY SYSTEM
    Client --> ClientPriority[â­ CLIENT PRIORITY]
    Project --> ProjectDeadline[ğŸ“… PROJECT DEADLINE]
    ClientPriority --> CNCQueue
    ProjectDeadline --> CNCQueue
    
    %% ASSEMBLY & LOGISTICS
    CNCProduction --> Assembly[ğŸ”§ ASSEMBLY]
    MaterialReservation --> Assembly
    Assembly --> QualityControl[âœ… QUALITY CONTROL]
    QualityControl --> PackingList[ğŸ“‹ PACKING LIST]
    PackingList --> Transport[ğŸš› TRANSPORT]
    Transport --> Installation[ğŸ—ï¸ INSTALLATION]
    
    %% SUBCONTRACTORS INTEGRATION
    Assembly --> SubcontractorTasks[ğŸ¤ SUBCONTRACTOR TASKS]
    Installation --> SubcontractorTasks
    SubcontractorTasks --> Subcontractors[ğŸ‘· SUBCONTRACTORS]
    
    %% CALENDAR & SCHEDULING
    Project --> Calendar[ğŸ“… CALENDAR]
    CNCQueue --> Calendar
    Transport --> Calendar
    Installation --> Calendar
    
    %% DASHBOARD & MONITORING
    Project --> Dashboard[ğŸ“Š DASHBOARD]
    Tiles --> Dashboard  
    Inventory --> Dashboard
    CNCQueue --> Dashboard
    
    %% REALTIME UPDATES
    Tiles --> RealtimeUpdates[ğŸ”„ REALTIME UPDATES]
    Inventory --> RealtimeUpdates
    CNCQueue --> RealtimeUpdates
    Transport --> RealtimeUpdates
    
    %% BUSINESS INTELLIGENCE
    Dashboard --> ProjectProfitability[ğŸ’¹ PROJECT PROFITABILITY]
    Dashboard --> ResourceUtilization[ğŸ“ˆ RESOURCE UTILIZATION] 
    Dashboard --> InventoryAlerts[ğŸš¨ INVENTORY ALERTS]
    
    %% STATUS FLOW FOR TILES (Most Important!)
    Tiles --> StatusPlanning[ğŸ“‹ Planning]
    StatusPlanning --> StatusDesign[ğŸ¨ Design]  
    StatusDesign --> StatusApproved[âœ… Approved]
    StatusApproved --> StatusCutting[âœ‚ï¸ Cutting]
    StatusCutting --> StatusAssembly[ğŸ”§ Assembly]
    StatusAssembly --> StatusReady[âœ… Ready]
    StatusReady --> StatusShipped[ğŸ“¦ Shipped]
    
    %% DATA LAYER
    subgraph "ğŸ’¾ SUPABASE DATABASE"
        ProjectsTable[(Projects Table)]
        TilesTable[(Tiles Table)]
        MaterialsTable[(Materials Table)]
        InventoryTable[(Inventory Table)]
        CNCQueueTable[(CNC Queue Table)]
        LogisticsTable[(Logistics Table)]
        ClientsTable[(Clients Table)]
    end
    
    %% RLS SECURITY
    subgraph "ğŸ” ROW LEVEL SECURITY"
        UserAuth[ğŸ‘¤ User Authentication]
        ProjectMembership[ğŸ“‹ Project Membership]
        RolePermissions[ğŸ”‘ Role Permissions]
    end
    
    %% FRONTEND MODULES
    subgraph "âš›ï¸ REACT MODULES"
        ProjectsModule[ğŸ“‹ Projects Module]
        TilesModule[ğŸ§© Tiles Module] 
        MaterialsModule[ğŸ“¦ Materials Module]
        CNCModule[âš™ï¸ CNC Module]
        LogisticsModule[ğŸš› Logistics Module]
        DashboardModule[ğŸ“Š Dashboard Module]
    end
    
    %% UI COMPONENTS
    subgraph "ğŸ¨ UI COMPONENTS"
        KanbanBoard[ğŸ“‹ Kanban Board]
        GanttChart[ğŸ“… Gantt Chart] 
        EntityTable[ğŸ“Š Entity Table]
        StatusBadges[ğŸ·ï¸ Status Badges]
    end
    
    %% REAL-TIME FEATURES
    subgraph "ğŸ”„ REALTIME FEATURES"
        TileStatusUpdates[ğŸ§© Tile Status Changes]
        InventoryChanges[ğŸ“¦ Inventory Changes] 
        CNCQueueUpdates[âš™ï¸ CNC Queue Updates]
        LogisticsTracking[ğŸš› Logistics Tracking]
    end
    
    %% STYLING
    classDef clientLayer fill:#e1f5fe
    classDef projectLayer fill:#f3e5f5
    classDef tilesLayer fill:#e8f5e8
    classDef materialLayer fill:#fff3e0
    classDef cncLayer fill:#fce4ec
    classDef logisticsLayer fill:#f1f8e9
    classDef systemLayer fill:#f5f5f5
    
    class Client,ClientPriority clientLayer
    class Project,Pricing,Concept,TechnicalDesign,ProjectDeadline projectLayer
    class Tiles,TileDesign,TileApproval,StatusPlanning,StatusDesign,StatusApproved,StatusCutting,StatusAssembly,StatusReady,StatusShipped tilesLayer
    class BOM,MaterialReservation,Inventory,MaterialOrdering,Suppliers materialLayer
    class DXFUpload,CNCEstimation,CNCQueue,CNCProduction cncLayer
    class Assembly,PackingList,Transport,Installation logisticsLayer
    class Dashboard,Calendar,RealtimeUpdates systemLayer
